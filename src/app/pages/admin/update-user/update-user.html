<div class="container">
    <div class="page-header">
        <h1><i class="fas fa-user-edit me-3"></i>Update Users</h1>
        <p class="text-muted mb-0">Manage and modify user details</p>
    </div>

    <div class="table-responsive">
        <table class="table user-table">
            <thead>
                <tr>
                    <th>User ID</th>
                    <th>Username</th>
                    <th>Email</th>
                    <th>Role</th>
                    <th>Active Status</th>
                    <th>Created At</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let user of users" 
                    [class.edit-mode]="isEditing(user.id)"
                    [attr.data-user-id]="user.id">
                    
                    <td><span class="user-id">#{{user.id}}</span></td>
                    
                    <!-- Username Field -->
                    <td class="editable-field">
                        <span *ngIf="!isEditing(user.id)">{{user.username}}</span>
                        <input *ngIf="isEditing(user.id)" 
                               type="text" 
                               class="form-control form-control-sm"
                               [(ngModel)]="user.username">
                    </td>
                    
                    <!-- Email Field -->
                    <td class="editable-field">
                        <span *ngIf="!isEditing(user.id)">{{user.email}}</span>
                        <input *ngIf="isEditing(user.id)" 
                               type="email" 
                               class="form-control form-control-sm"
                               [(ngModel)]="user.email">
                    </td>
                    
                    <!-- Role Field -->
                    <td class="editable-field">
                        <span *ngIf="!isEditing(user.id)" 
                              class="user-role" 
                              [ngClass]="getRoleClass(user.role)">
                            {{user.role}}
                        </span>
                        <select *ngIf="isEditing(user.id)" 
                                class="form-select form-select-sm"
                                [(ngModel)]="user.role">
                            <option value="USER">USER</option>
                            <option value="ADMIN">ADMIN</option>
                            <option value="MODERATOR">MODERATOR</option>
                        </select>
                    </td>
                    
                    <!-- Active Status Field -->
                    <td class="editable-field">
                        <span *ngIf="!isEditing(user.id)" 
                              class="user-status" 
                              [ngClass]="getActiveClass(user.isActive)">
                            {{user.isActive ? 'Active' : 'Inactive'}}
                        </span>
                        <select *ngIf="isEditing(user.id)" 
                                class="form-select form-select-sm"
                                [(ngModel)]="user.isActive">
                            <option [value]="true">Active</option>
                            <option [value]="false">Inactive</option>
                        </select>
                    </td>
                    
                    <!-- Created At (Non-editable) -->
                    <td class="user-date">{{formatDate(user.createdAt)}}</td>
                    
                    <!-- Actions -->
                    <td>
                        <div *ngIf="!isEditing(user.id)">
                            <button class="btn btn-edit btn-sm" 
                                    (click)="startEdit(user)">
                                <i class="fas fa-edit me-1"></i>Edit
                            </button>
                        </div>
                        
                        <div *ngIf="isEditing(user.id)">
                            <button class="btn btn-save btn-sm me-2" 
                                    (click)="saveEdit(user)">
                                <i class="fas fa-check me-1"></i>Save
                            </button>
                            <button class="btn btn-cancel btn-sm" 
                                    (click)="cancelEdit(user)">
                                <i class="fas fa-times me-1"></i>Cancel
                            </button>
                        </div>
                    </td>
                </tr>
                
                <!-- Empty state -->
                <tr *ngIf="users.length === 0">
                    <td colspan="7" class="text-center py-4">
                        <i class="fas fa-users fa-3x text-muted mb-3"></i>
                        <p class="text-muted">No users found</p>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
